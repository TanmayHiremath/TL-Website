<section>
  
  <div class="example-button-row">
    <button type="button" class="btn btn-info btn-lg one" (click)="show_requests()" >Requests</button>&nbsp;&nbsp;
    <button type="button" class="btn btn-warning btn-lg two" (click)="show_items()">Items</button>
  </div>
</section>

<h1  class="{{filter_1}}">REQUESTS</h1>

<div class="cd-filter {{filter_1}} ">
  <form>
      <label class="radio-inline">
        <input type="radio" name="optradio" (click)="only_issued()">issued
      </label>
      &nbsp;
      <label class="radio-inline">
        <input type="radio" name="optradio" (click)="only_denied()">denied
      </label>&nbsp;
      <label class="radio-inline">
        <input type="radio" name="optradio" (click)="only_pending()" checked>pending
      </label>&nbsp;
      <label class="radio-inline">
        <input type="radio" name="optradio" (click)="only_returned()" >returned
      </label>&nbsp;
      <label class="radio-inline">
          <input type="radio" name="optradio" (click)="all_1()">all
        </label>&nbsp;
    </form>

  <a href="#0" class="cd-close"></a>
</div> <!-- cd-filter -->




<table id="dtBasicExample" class="table table-striped table-bordered table-sm  {{filter_1}}" cellspacing="0" width="100%">
  <thead>
    <tr>
      <th class="th-sm">item Name
      </th>
      <th class="th-sm">request.quantity
      </th>
      <th class="th-sm">request.roll
      </th>
      <th class="th-sm">items[request.item-1].quantity
      </th>
      <th class="th-sm">request.id
      </th>
      <th class="th-sm">id required</th>

      <th class="th-sm">status</th>
    </tr>
  </thead>
  <tbody>
    <tr class="{{filter_11}}" *ngFor="let request of requests">
        
      <td *ngIf="(request.is_issued==filter_issued) && (request.is_denied==filter_denied) && (request.is_sent==true) && ((request.is_returned==filter_returned) || (items[request.item-1].is_consumable==filter_consumable))">{{items[request.item-1].name}}</td>
      <td *ngIf="(request.is_issued==filter_issued) && (request.is_denied==filter_denied) && (request.is_sent==true) && ((request.is_returned==filter_returned) || (items[request.item-1].is_consumable==filter_consumable))">{{request.quantity}}</td>
      <td *ngIf="(request.is_issued==filter_issued) && (request.is_denied==filter_denied) && (request.is_sent==true) && ((request.is_returned==filter_returned) || (items[request.item-1].is_consumable==filter_consumable))">{{request.roll}}</td>
      <td *ngIf="(request.is_issued==filter_issued) && (request.is_denied==filter_denied) && (request.is_sent==true) && ((request.is_returned==filter_returned) || (items[request.item-1].is_consumable==filter_consumable))">{{items[request.item-1].quantity}}</td>
      <td *ngIf="(request.is_issued==filter_issued) && (request.is_denied==filter_denied) && (request.is_sent==true) && ((request.is_returned==filter_returned) || (items[request.item-1].is_consumable==filter_consumable))">{{request.id}}</td>
      <td *ngIf="(request.is_issued==filter_issued) && (request.is_denied==filter_denied) && (request.is_sent==true) && ((request.is_returned==filter_returned) || (items[request.item-1].is_consumable==filter_consumable))">{{items[request.item-1].id_required}}</td>
      <td *ngIf="(request.is_issued==filter_issued) && (request.is_denied==filter_denied) && (request.is_sent==true) &&(filter_issued==false) && (filter_denied==false)"><button (click)="issue_request(request)">issue</button><button (click)="deny_request(request)">deny</button></td>
      <td *ngIf="(request.is_issued==filter_issued) && (request.is_denied==filter_denied) && (request.is_sent==true) &&(filter_issued==true) && (filter_denied==false) && ((request.is_returned==filter_returned) || (items[request.item-1].is_consumable==filter_consumable))">issued<button (click)="deny_request(request)">deny anyway</button><button *ngIf="request.is_returned==false" (click)="return_request(request)">return</button>
        <!-- <button (click)="deny_request(request)">deny</button> -->
      </td>
      <td *ngIf="(request.is_issued==filter_issued) && (request.is_denied==filter_denied) && (request.is_sent==true) && (filter_issued==false) && (filter_denied==true)">denied<button (click)="issue_request(request)">issue anyway</button>
        <!-- <button (click)="deny_request(request)">deny</button> -->
      </td>
      
      <button (click)="p_request(request)">p</button>
      
    </tr>
    <tr class="{{filter_12}}" *ngFor="let request of requests">
        
      <td *ngIf= " (request.is_sent==true)" >{{items[request.item-1].name}}</td>
      <td *ngIf= " (request.is_sent==true)">{{request.quantity}}</td>
      <td *ngIf= " (request.is_sent==true)">{{request.roll}}</td>
      <td *ngIf= " (request.is_sent==true)">{{items[request.item-1].quantity}}</td>
      <td *ngIf= " (request.is_sent==true)">{{request.id}}</td>
      <td *ngIf= " (request.is_sent==true)">{{items[request.item-1].id_required}}</td>
      <td *ngIf="(request.is_issued==false) && (request.is_sent==true) && (request.is_denied==false) ">pending<button (click)="issue_request(request)">issue</button><button (click)="deny_request(request)">deny</button></td>
      <td *ngIf="(request.is_issued==true) && (request.is_sent==true) && (request.is_denied==false) && ((request.is_returned==false) || (items[request.item-1].is_consumable==true)) ">issued &nbsp; <button *ngIf="request.is_returned==false" (click)="return_request(request)">return</button>&nbsp;<button (click)="deny_request(request)">deny anyway</button></td>
      <td *ngIf="(request.is_issued==false) && (request.is_sent==true) && (request.is_denied==true) ">denied <button (click)="issue_request(request)">issue anyway</button></td>
      <td *ngIf="(request.is_returned==true) && (request.is_sent==true) && items[request.item-1].is_consumable==false">returned</td>
      
      
    </tr>

    <tr class="{{filter_13}}" *ngFor="let request of requests">
        
      <td *ngIf="(request.is_returned==true) && (request.is_sent==true) && items[request.item-1].is_consumable==false">{{items[request.item-1].name}}</td>
      <td *ngIf="(request.is_returned==true) && (request.is_sent==true) && items[request.item-1].is_consumable==false">{{request.quantity}}</td>
      <td *ngIf="(request.is_returned==true) && (request.is_sent==true) && items[request.item-1].is_consumable==false">{{request.roll}}</td>
      <td *ngIf="(request.is_returned==true) && (request.is_sent==true) && items[request.item-1].is_consumable==false">{{items[request.item-1].quantity}}</td>
      <td *ngIf="(request.is_returned==true) && (request.is_sent==true) && items[request.item-1].is_consumable==false">{{request.id}}</td>
      <td *ngIf="(request.is_returned==true) && (request.is_sent==true) && items[request.item-1].is_consumable==false">{{items[request.item-1].id_required}}</td>
      <!-- <td *ngIf="(request.is_issued==false) && (request.is_denied==false) "><button (click)="issue_request(request)">issue</button><button (click)="deny_request(request)">deny</button></td>
      <td *ngIf="(request.is_issued==true) && (request.is_denied==false) && ((request.is_returned==false) || (items[request.item-1].is_consumable==true)) ">issued <button (click)="deny_request(request)">deny anyway</button></td>
      <td *ngIf="(request.is_issued==false) && (request.is_denied==true) ">denied <button (click)="issue_request(request)">issue anyway</button></td> -->
      <td *ngIf="(request.is_returned==true) && (request.is_sent==true) && items[request.item-1].is_consumable==false">returned</td>
      
      
    </tr>
  </tbody>
  
</table>

<h1  class="{{filter_2}}">ITEMS</h1>



<table id="dtBasicExample" class="table table-striped table-bordered table-sm  {{filter_2}}" cellspacing="0" width="100%">
  <thead>
    <tr>
      <th class="th-sm">item Name
      </th>
      
      <th class="th-sm">price
      </th>
      <th class="th-sm">items quantity
      </th>
      <th class="th-sm">colour code
      </th>
      <th class="th-sm">id required</th>
      <th class="th-sm">SAVE
      </th>
    </tr>
  </thead>
  <tbody>
    <tr class="" *ngFor="let item of items">
        
      <td >{{item.name}}</td>
      
      <td ><button [disabled]="item.price<=1" (click)="decrementPrice(item)">-</button><input type="text"
        [(ngModel)]="item.price"><button (click)="incrementPrice(item)">+</button></td>
      <td > <button [disabled]="item.quantity<=1" (click)="decrementQuantity(item)">-</button><input type="text"
        [(ngModel)]="item.quantity"><button (click)="incrementQuantity(item)">+</button></td>
      <td style="color: red;" *ngIf="item.is_consumable==true  &&  item.quantity<0.3*item.critical_val">Red</td>
      <td style="color: yellow;" *ngIf="item.is_consumable==true  &&  0.3*item.critical_val<=item.quantity &&  item.quantity <0.7*item.critical_val">Yellow</td>
      <td  style="color: green;" *ngIf="item.is_consumable==true  &&  item.quantity>=0.7*item.critical_val">Green</td>
      <td *ngIf="item.is_consumable==false">Not Consumable</td>
      <td>{{item.id_required}}</td>
      <td><button (click)="save(item)">save</button></td>
    </tr>
    <!-- <tr class="{{filter_12}}" *ngFor="let request of requests">
        
      <td>{{items[request.item-1].name}}</td>
      <td >{{request.quantity}}</td>
      <td>{{request.roll}}</td>
      <td >{{items[request.item-1].quantity}}</td>
      <td >{{request.id}}</td>
      <td *ngIf="(request.is_issued==false) && (request.is_denied==false) "><button (click)="issue_request(request)">issue</button><button (click)="deny_request(request)">deny</button></td>
      <td *ngIf="(request.is_issued==true) && (request.is_denied==false) ">issued</td>
      <td *ngIf="(request.is_issued==false) && (request.is_denied==true) ">denied</td>
      
      
    </tr> -->
  </tbody>
  
</table>

